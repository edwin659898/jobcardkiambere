import{B as A}from"./Authenticated-6f933b77.js";import{H as j,L as M,q as u,o as l,g as n,a as m,w as _,F as h,d as e,t as i,k as d,h as x,x as g,s as f,e as v,n as y}from"./app-7d6d683b.js";import{P as S}from"./pagination-adc25336.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const L={components:{BreezeAuthenticatedLayout:A,Head:j,Link:M,Pagination:S},props:{Activities:Object,success:String,filters:Object,CreatedRoles:Object},data(){return{search:this.$props.filters.search,isOpen:!1,isExcel:!1,isRole:!1,form:this.$inertia.form({role:null,file:""})}},methods:{searchUser(){this.$inertia.get("/manage/activity/roles",{search:this.search},{preserveState:!0,replace:!0})},openModalExcel(){this.isOpen=!0,this.isRole=!1,this.isExcel=!0},openModalRole(){this.isOpen=!0,this.isExcel=!1,this.isRole=!0},closeModal(){this.isOpen=!1,this.reset()},createRole(){this.form.post("/create-role",{onSuccess:()=>this.form.role="",onSuccess:()=>this.closeModal()})},destroyRole(a){confirm("Are you sure?")&&this.form.delete(`/destroy-role/${a}`)},uploadFile(){this.form.post("/upload/activities",{onSuccess:()=>this.form.file="",onSuccess:()=>this.closeModal()})}}},O={class:"content-wrapper"},B={class:"content-header"},N={class:"container-fluid"},U={class:"row mb-2"},V={class:"col-sm-6"},z={class:"m-0"},F={class:"col-sm-6"},H={class:"breadcrumb float-sm-right"},D=e("li",{class:"breadcrumb-item"},"Home",-1),T={class:"breadcrumb-item active"},q={class:"content text-sm"},I={class:"container-fluid"},P={class:"row"},J={class:"col-lg-12 connectedSortable"},K={class:"py-6"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-4 bg-white border-b border-gray-200"},X={key:0,class:"p-4 mb-4 text-sm text-blue-700 bg-blue-100 rounded-lg",role:"alert"},Y={class:"flex justify-end mt-2 mb-2"},Z={class:"card-header"},$=e("h3",{class:"card-title"},"Job Card Activities",-1),ee={class:"card-tools"},se={class:"input-group input-group-sm",style:{width:"150px"}},te={class:"card-body table-responsive p-0"},oe={class:"table table-hover text-nowrap"},le=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Activity Name"),e("th",null,"Roles"),e("th",null,"Action")])],-1),ne=e("i",{class:"fas fa-edit cursor-pointer text-blue-500 hover:text-blue-700"},null,-1),ie={key:0,class:"fixed z-0 inset-0 overflow-y-auto ease-out duration-400 text-xs"},re={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},de=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1),ae=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1),ce={class:"inline-block align-center bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ue={key:0},me={class:"bg-white px-4 pt-5 pb-2 sm:p-2 sm:pb-2"},he=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Upload Activities")],-1),fe={class:"card-body"},be={class:"pt-3"},pe=e("label",{class:"block mb-2 text-sm font-medium"},"Choose Excel File",-1),_e=["value"],xe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ge={class:"mt-1 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto ml-2"},ve=["disabled"],ye={class:"mt-1 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},we={key:1},ke={class:"bg-white px-4 pt-5 pb-2 sm:p-2 sm:pb-2"},Ce=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Roles")],-1),Re={class:"card-body"},Ae={id:"external-events"},je=["onClick"],Me={class:"pt-3"},Se=e("label",{class:"block mb-2 text-sm font-medium"},"Role Name",-1),Ee={key:0,class:"text-xs text-red-600 mt-1"},Le={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Oe={class:"mt-1 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto ml-2"},Be=["disabled"],Ne={class:"mt-1 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function Ue(a,t,c,Ve,o,r){const w=u("Head"),k=u("Link"),C=u("pagination"),R=u("BreezeAuthenticatedLayout");return l(),n(h,null,[m(w,{title:"Roles Management"}),m(R,null,{default:_(()=>[e("div",O,[e("div",B,[e("div",N,[e("div",U,[e("div",V,[e("h1",z,i(a.route().current()),1)]),e("div",F,[e("ol",H,[D,e("li",T,i(a.route().current()),1)])])])])]),e("section",q,[e("div",I,[e("div",P,[e("section",J,[e("div",K,[e("div",G,[e("div",Q,[e("div",W,[c.success?(l(),n("div",X,i(c.success),1)):d("",!0),e("div",Y,[e("button",{onClick:t[0]||(t[0]=s=>r.openModalRole()),class:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Edit Roles"),e("button",{onClick:t[1]||(t[1]=s=>r.openModalExcel()),class:"inline-flex ml-2 justify-center rounded-md border border-transparent px-4 py-2 bg-blue-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Upload Activities")]),e("div",Z,[$,e("div",ee,[e("div",se,[x(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>o.search=s),onKeyup:t[3]||(t[3]=s=>r.searchUser()),class:"border-gray-200 focus:border-green-300 focus:ring-0 form-control float-right",placeholder:"Search..."},null,544),[[g,o.search]])])])]),e("div",te,[e("table",oe,[le,(l(!0),n(h,null,f(c.Activities.data,(s,b)=>(l(),n("tbody",{key:s.id},[e("tr",null,[e("td",null,i(b+1),1),e("td",null,i(s.name),1),e("td",null,[(l(!0),n(h,null,f(s.roles,p=>(l(),n("li",{key:p.id},i(p.role),1))),128))]),e("td",null,[m(k,{href:a.route("Edit.activity.roles",{id:s.id})},{default:_(()=>[ne]),_:2},1032,["href"])])])]))),128))])]),m(C,{class:"mt-6",links:c.Activities.links},null,8,["links"])])])])])])])])])]),o.isOpen?(l(),n("div",ie,[e("div",re,[de,ae,v("â€‹ "),e("div",ce,[o.isExcel?(l(),n("form",ue,[e("div",me,[he,e("div",fe,[e("div",be,[pe,e("input",{type:"file",onInput:t[4]||(t[4]=s=>o.form.file=s.target.files[0]),accept:".xls,.xlsx"},null,32),o.form.progress?(l(),n("progress",{key:0,value:o.form.progress.percentage,max:"100"},i(o.form.progress.percentage)+"% ",9,_e)):d("",!0)])])]),e("div",xe,[e("span",ge,[e("button",{type:"button",class:y(["inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5",{"opacity-25":o.form.processing}]),onClick:t[5]||(t[5]=s=>r.uploadFile()),disabled:o.form.processing}," Save ",10,ve)]),e("span",ye,[e("button",{onClick:t[6]||(t[6]=s=>r.closeModal()),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])])):d("",!0),o.isRole?(l(),n("form",we,[e("div",ke,[Ce,e("div",Re,[e("div",Ae,[(l(!0),n(h,null,f(c.CreatedRoles,s=>(l(),n("div",{key:s.id,class:"flex justify-between external-event bg-primary"},[v(i(s.role)+" ",1),e("i",{onClick:b=>r.destroyRole(s.id),class:"fas fa-trash cursor-pointer text-red-500 hover:text-red-800"},null,8,je)]))),128))]),e("div",Me,[Se,x(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.role=s),class:"border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Role in Caps",required:""},null,512),[[g,o.form.role]])]),o.form.errors.role?(l(),n("div",Ee,i(o.form.errors.role),1)):d("",!0)])]),e("div",Le,[e("span",Oe,[e("button",{type:"button",class:y(["inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5",{"opacity-25":o.form.processing}]),onClick:t[8]||(t[8]=s=>r.createRole()),disabled:o.form.processing}," Save ",10,Be)]),e("span",Ne,[e("button",{onClick:t[9]||(t[9]=s=>r.closeModal()),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])])):d("",!0)])])])):d("",!0)]),_:1})],64)}const Te=E(L,[["render",Ue]]);export{Te as default};
